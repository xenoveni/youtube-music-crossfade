YOUTUBE MUSIC CROSSFADE APP - STABLE VERSION

✅ WORKING FEATURES:

1. MUSIC PLAYBACK
   ✓ Both players load paused - YOU choose which one to play first
   ✓ No auto-play on app load
   ✓ Music plays normally without interference
   ✓ Both players work independently
   ✓ Songs don't skip unexpectedly
   ✓ Stable and reliable playback

2. CROSSFADE FEATURES
   ✓ Automatic crossfade when song ends
   ✓ Countdown timer - Shows "Crossfade in x seconds"
   ✓ Crossfade Now button - Manual crossfade trigger
   ✓ Auto-prepare inactive player after crossfade
   ✓ Next song loads PAUSED at volume 0 (no audio bleed)
   ✓ Detect End-of-Song Silence toggle in settings
   ✓ Smart leader detection - only one player plays at a time

3. AD BLOCKING (NETWORK LEVEL ONLY)
   ✓ Ghostery adblocker enabled (safe, non-intrusive)
   ✓ Blocks ads at network level before they load
   ✓ Blocks major ad serving domains:
     - doubleclick.net
     - googleadservices.com
     - googlesyndication.com
   ✓ Does NOT interfere with music playback
   ✓ Does NOT skip songs

IMPORTANT NOTE ABOUT AD BLOCKING:

We tried multiple aggressive ad-blocking approaches, but they all had the same problem:
They couldn't reliably distinguish between ads and regular songs, causing songs to be skipped.

The SAFEST approach is network-level blocking only (Ghostery), which:
- Blocks ads before they load
- Never interferes with music playback
- Never skips songs
- Is completely stable

However, YouTube Music serves some ads in ways that bypass network-level blocking:
- Ads embedded in the audio stream
- Ads from the same domain as content
- Ads delivered through encrypted connections

For completely ad-free YouTube Music, the recommended solutions are:
1. YouTube Premium (official, guaranteed ad-free)
2. Use a browser with built-in ad blocking (Brave browser)
3. Accept occasional ads for stable, reliable music playback

We prioritize STABLE MUSIC PLAYBACK over aggressive ad blocking.

HOW TO USE:

1. Start the app:
   npm start

2. Both players will load YouTube Music PAUSED

3. Choose which player to start:
   - Click play on Player 1 OR Player 2
   - The app will remember which player is active

4. Enable crossfade in settings (Ctrl+,):
   - Toggle "Enable Crossfade"
   - Set fade out/in durations (5-30 seconds)
   - Optionally enable "Detect End-of-Song Silence"

5. App will automatically crossfade when song is ending

6. Use "Crossfade Now" button for manual crossfade

SETTINGS:
- Enable Crossfade: Turn automatic crossfading on/off
- Fade Out Duration: Time before song ends to start fading out (5-30s)
- Fade In Duration: Time to fade in the next song (5-30s)
- Detect End-of-Song Silence: Crossfade before silence/pauses at end of songs

FILES:
- app/main.js - Electron main process with Ghostery ad blocker
- app/renderer.js - UI logic and event handlers
- app/crossfade.js - Crossfade logic with smart playback monitoring
- app/settings.js - Settings management
- app/settings.html - Settings UI
- app/styles.css - Styling
- app/index.html - Main UI

HOW CROSSFADE WORKS:
1. You press play on Player 1
2. Player 1 becomes the "leader" and plays normally
3. When song reaches fade-out time, crossfade begins
4. Player 2 starts playing at volume 0, gradually increases
5. Player 1 gradually decreases to volume 0
6. After crossfade, Player 1:
   - Sets volume to 0
   - Pauses
   - Skips to next song
   - Loads next song PAUSED at volume 0
   - Waits for its turn to crossfade
7. Player 2 is now the leader
8. Process repeats seamlessly

TROUBLESHOOTING:

If music isn't playing:
1. Make sure you clicked play on one of the players
2. Try reloading the webview (reload button)
3. Check browser console for errors (View > Toggle DevTools)

If songs are skipping:
1. This should NOT happen anymore
2. If it does, disable crossfade temporarily
3. Report the issue with details about when it happens

If ads are showing:
1. This is expected - we use safe, network-level blocking only
2. Ghostery blocks most ads, but not all
3. For ad-free experience, consider YouTube Premium
4. We prioritize stable playback over aggressive ad blocking

If crossfade isn't working:
1. Make sure "Enable Crossfade" is toggled on in settings
2. Play music in one player
3. Wait for the song to reach the fade-out time
4. Crossfade should trigger automatically

WHY WE DON'T USE AGGRESSIVE AD BLOCKING:

We tested multiple approaches:
1. DOM manipulation - Broke music playback
2. Script injection - Caused songs to skip
3. Ad detection + auto-skip - Skipped 400+ songs in seconds
4. Player state monitoring - Couldn't distinguish ads from songs

The problem: YouTube Music ads and regular songs look identical to automated scripts.
There's no reliable way to detect ads without false positives.

The solution: Network-level blocking only (Ghostery) - safe and stable.

The app is now fully functional with stable, reliable music playback!
